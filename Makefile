# –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä
CXX = g++
# –§–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
CXXFLAGS = -std=c++17
# –§–ª–∞–≥–∏ –ª–∏–Ω–∫–æ–≤–∫–∏
LDFLAGS = -lraylib -lGL -lm -lpthread -ldl -lrt -lX11

# –Ø–í–ù–´–ô –ø–æ—Ä—è–¥–æ–∫ —Ñ–∞–π–ª–æ–≤ (–≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–±–æ—Ä–∫–∏)
SRC_FILES = src/main.cpp src/game.cpp src/menu.cpp
# –¶–µ–ª–µ–≤–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
TARGET = build/game

# –§–∏–∫—Ç–∏–≤–Ω—ã–µ —Ü–µ–ª–∏ (–Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ñ–∞–π–ª–∞–º–∏)
.PHONY: all run play clean help

# –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
all: $(TARGET)

# –ü—Ä–∞–≤–∏–ª–æ —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
$(TARGET): $(SRC_FILES)
	@mkdir -p build
	@echo "üîß –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏–≥—Ä—ã..."
	@$(CXX) $(CXXFLAGS) $(SRC_FILES) -o $(TARGET) $(LDFLAGS)
	@echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: $(TARGET)"

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫
run: $(TARGET)
	@echo "üöÄ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã..."
	@./$(TARGET)

# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ)
play: $(TARGET)
	@./$(TARGET)

# –û—á–∏—Å—Ç–∫–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
clean:
	@rm -rf build
	@echo "üßπ –ü–∞–ø–∫–∞ build –æ—á–∏—â–µ–Ω–∞"

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo "  make        - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É"
	@echo "  make run    - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å"
	@echo "  make play   - –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å (–µ—Å–ª–∏ —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ)"
	@echo "  make clean  - —É–¥–∞–ª–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"
	@echo "  make help   - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É"